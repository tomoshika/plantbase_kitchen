<div class="container">
  <div class="row mt-3">
    <div class="col-lg-10 col-md-12 mx-auto">
      <section><h3>アカウント情報編集</h3></section>
　　　<%= render 'layouts/errors', obj: @user  %>
　　　<%= form_with model:@user, local:true do |f| %>
　　　  <div class="row mt-3">

　　　    <div class="col-lg-7 col-md-12 mt-2">
            <%= f.attachment_field :image, class: 'user_field', style: 'display:none;' %>
            <%= attachment_image_tag @user, :image, fallback: 'no_image.jpeg', onClick: "$('.user_field').click()", class: 'img-thumbnail user_preview rounded-circle' %>
            <script>
             $(function () {
                function readURL(input) {
                  if (input.files && input.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                      $('.user_preview').attr('src', e.target.result);
                    }
                    reader.readAsDataURL(input.files[0]);
                  }
                }

                $('.user_field').change(function () {
                  readURL(this);
                });
              });
            </script>
          </div>

          <div class="col-lg-7 col-md-12">
            <div class="form-group">
              <%= f.label :name, "名前" %></br>
              <%= f.text_field :name, class: "form-control"%>
            </div>
            <div class="form-group">
              <%= f.label :introduction, "自己紹介" %></br>
              <%= f.text_area :introduction, class: "form-control" %>
            </div>
            <div class="form-group">
              <%= f.submit "変更を保存する", class: "btn btn-3 offset-4 mt-4" %>
            </div>
          </div>

        </div>
      <% end %>
　　</div>
　</div>
</div>


